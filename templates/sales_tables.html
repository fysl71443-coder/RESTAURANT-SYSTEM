{% extends 'base.html' %}
{% set back_url = url_for('sales') %}

{% block title %}{{ _('Tables / الطاولات') }} — {{ branch_label }}{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h3 class="mb-0">{{ _('Tables / الطاولات') }} — {{ branch_label }}</h3>
      <small class="text-muted">{{ _('Select a table (1–50) / اختر طاولة') }}</small>
    </div>
    <div>
      <a class="btn btn-outline-secondary" href="{{ url_for('sales') }}">← {{ _('Back / رجوع') }}</a>
    </div>
  </div>

  <div class="row g-3">
    {% for table in tables %}
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <a class="card text-center text-decoration-none shadow-sm h-100 border-0
         {% if table.status == 'occupied' %}bg-warning text-dark{% elif table.status == 'reserved' %}bg-info text-white{% else %}bg-light{% endif %}"
         href="{{ url_for('sales_table_manage', branch_code=branch_code, table_no=table.number) }}">
        <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 80px;">
          <div>
            <div class="fw-bold" style="font-size: 1.25rem;">{{ table.number }}</div>
            <div style="font-size: .75rem;">
              {% if table.status == 'occupied' %}
                🔴 {{ _('Occupied / مشغول') }}
              {% elif table.status == 'reserved' %}
                🟡 {{ _('Reserved / محجوز') }}
                {% if table.draft_count > 0 %}
                <div class="badge bg-light text-dark mt-1">{{ table.draft_count }} {{ _('orders / طلبات') }}</div>
                {% endif %}
              {% else %}
                🟢 {{ _('Available / متاح') }}
              {% endif %}
            </div>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

